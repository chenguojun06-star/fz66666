<view class="container">
  <!-- é€šç”¨æ‚¬æµ®é“ƒé“›ç»„ä»¶ -->
  <floating-bell />

  <view class="card">
    <view class="title">é¦–é¡µ</view>

    <global-search
      keyword="{{globalSearch.keyword}}"
      results="{{globalSearch.results}}"
      has-searched="{{globalSearch.hasSearched}}"
      bind:input="onGlobalSearchInput"
      bind:search="doGlobalSearch"
      bind:clear="clearGlobalSearch"
      bind:close="closeGlobalSearch"
      bind:itemtap="onResultItemTap"
    />

    <view wx:if="{{loading}}" class="hint">åŠ è½½ä¸­...</view>
    <view wx:if="{{!loading && !statsLoaded}}" class="hint">æš‚æ— ç»Ÿè®¡</view>
    <view class="home-section-title">æ•°æ®æ¦‚è§ˆ</view>
    <view class="home-stats-grid">
      <view class="home-stat-card stat-sample">
        <view class="stat-head">
          <text class="stat-card-emoji">ğŸ·ï¸</text>
          <text class="stat-card-label">æ ·è¡£å¼€å‘</text>
          <text class="stat-total">{{topStats.sampleDevelopment.total}}</text>
        </view>
        <view class="stat-tags-row">
          <view class="stat-tag"><text class="tag-label">æ—¥</text><text class="tag-value">{{topStats.sampleDevelopment.day}}</text></view>
          <view class="stat-tag"><text class="tag-label">å‘¨</text><text class="tag-value">{{topStats.sampleDevelopment.week}}</text></view>
          <view class="stat-tag"><text class="tag-label">æœˆ</text><text class="tag-value">{{topStats.sampleDevelopment.month}}</text></view>
          <view class="stat-tag"><text class="tag-label">å¹´</text><text class="tag-value">{{topStats.sampleDevelopment.year}}</text></view>
        </view>
      </view>
      <view class="home-stat-card stat-bulk">
        <view class="stat-head">
          <text class="stat-card-emoji">ğŸ›’</text>
          <text class="stat-card-label">å¤§è´§ä¸‹å•</text>
          <text class="stat-total">{{topStats.bulkOrder.total}}</text>
        </view>
        <view class="stat-tags-row">
          <view class="stat-tag"><text class="tag-label">æ—¥</text><text class="tag-value">{{topStats.bulkOrder.day}}</text></view>
          <view class="stat-tag"><text class="tag-label">å‘¨</text><text class="tag-value">{{topStats.bulkOrder.week}}</text></view>
          <view class="stat-tag"><text class="tag-label">æœˆ</text><text class="tag-value">{{topStats.bulkOrder.month}}</text></view>
          <view class="stat-tag"><text class="tag-label">å¹´</text><text class="tag-value">{{topStats.bulkOrder.year}}</text></view>
        </view>
      </view>
      <view class="home-stat-card stat-cutting">
        <view class="stat-head">
          <text class="stat-card-emoji">âœ‚ï¸</text>
          <text class="stat-card-label">è£å‰ªæ•°é‡</text>
          <text class="stat-total">{{topStats.cutting.total}}</text>
        </view>
        <view class="stat-tags-row">
          <view class="stat-tag"><text class="tag-label">æ—¥</text><text class="tag-value">{{topStats.cutting.day}}</text></view>
          <view class="stat-tag"><text class="tag-label">å‘¨</text><text class="tag-value">{{topStats.cutting.week}}</text></view>
          <view class="stat-tag"><text class="tag-label">æœˆ</text><text class="tag-value">{{topStats.cutting.month}}</text></view>
          <view class="stat-tag"><text class="tag-label">å¹´</text><text class="tag-value">{{topStats.cutting.year}}</text></view>
        </view>
      </view>
      <view class="home-stat-card stat-warehousing">
        <view class="stat-head">
          <text class="stat-card-emoji">ğŸ“¦</text>
          <text class="stat-card-label">å‡ºå…¥åº“æ•°é‡</text>
          <text class="stat-total">{{topStats.warehousing.total}}</text>
        </view>
        <view class="stat-tags-row">
          <view class="stat-tag"><text class="tag-label">æ—¥</text><text class="tag-value">{{topStats.warehousing.day}}</text></view>
          <view class="stat-tag"><text class="tag-label">å‘¨</text><text class="tag-value">{{topStats.warehousing.week}}</text></view>
          <view class="stat-tag"><text class="tag-label">æœˆ</text><text class="tag-value">{{topStats.warehousing.month}}</text></view>
          <view class="stat-tag"><text class="tag-label">å¹´</text><text class="tag-value">{{topStats.warehousing.year}}</text></view>
        </view>
      </view>
    </view>

    <view class="home-section-title">å¿«æ·å…¥å£</view>
    <view class="home-entries">
      <view class="home-entry" hover-class="home-entry-hover" hover-stay-time="100" data-tab="orders_production" bindtap="goWork">ç”Ÿäº§</view>
      <view class="home-entry" hover-class="home-entry-hover" hover-stay-time="100" data-tab="warehousing" bindtap="goWork">å…¥åº“</view>
      <view class="home-entry" hover-class="home-entry-hover" hover-stay-time="100" data-tab="exceptions" bindtap="goWork">å¼‚å¸¸</view>
      <view class="home-entry" hover-class="home-entry-hover" hover-stay-time="100" bindtap="goScan">æ‰«ç </view>
      <view class="home-entry" hover-class="home-entry-hover" hover-stay-time="100" bindtap="goAdmin">æˆ‘çš„</view>
    </view>

    <view class="home-section-title">æœ€è¿‘åŠ¨æ€</view>
    <view wx:if="{{activities.length === 0}}" class="hint">æš‚æ— åŠ¨æ€</view>
    <view wx:for="{{activities}}" wx:key="id" class="home-activity">
      <view class="home-activity-row">
        <view class="home-activity-icon home-activity-icon--{{item.type}}">
          <text wx:if="{{item.type === 'style'}}">âœ‚ï¸</text>
          <text wx:elif="{{item.type === 'production'}}">ğŸ“‹</text>
          <text wx:elif="{{item.type === 'scan'}}">ğŸ“±</text>
          <text wx:elif="{{item.type === 'material'}}">ğŸ“¦</text>
          <text wx:else>ğŸ“Œ</text>
        </view>
        <view class="home-activity-content">{{item.content}}</view>
        <view class="home-activity-time">{{item.time}}</view>
      </view>
    </view>
  </view>
</view>
