<view class="container">
  <!-- æœˆä»½é€‰æ‹© -->
  <view class="month-selector">
    <view class="month-arrow" hover-class="month-arrow-hover" hover-stay-time="100" bindtap="onPrevMonth">â€¹</view>
    <text class="month-text">{{displayMonth}}</text>
    <view class="month-arrow" hover-class="month-arrow-hover" hover-stay-time="100" bindtap="onNextMonth">â€º</view>
  </view>

  <!-- æœç´¢ -->
  <view class="filter-section">
    <view class="search-row">
      <view class="search-box">
        <text class="search-icon">ğŸ”</text>
        <input class="search-input" placeholder="è®¢å•å· / è²å· / å·¥åº" value="{{searchKeyword}}" bindinput="onKeywordInput" confirm-type="search" bindconfirm="onSearch" />
      </view>
      <view class="search-btn" hover-class="search-btn-hover" hover-stay-time="100" bindtap="onSearch">æœç´¢</view>
      <view class="clear-btn" hover-class="clear-btn-hover" hover-stay-time="100" wx:if="{{searchKeyword}}" bindtap="onClearSearch">é‡ç½®</view>
    </view>
  </view>

  <!-- æ±‡æ€»å¡ç‰‡ -->
  <view class="summary-card">
    <view class="summary-item">
      <text class="summary-num">{{summary.totalQuantity || 0}}</text>
      <text class="summary-label">æ•°é‡æ±‡æ€»</text>
    </view>
    <view class="summary-item">
      <text class="summary-num">{{summary.orderCount || 0}}</text>
      <text class="summary-label">è®¢å•æ•°</text>
    </view>
    <view class="summary-item">
      <text class="summary-num">{{summary.recordCount || 0}}</text>
      <text class="summary-label">è®°å½•æ•°ï¼ˆæ ·è¡£{{summary.patternRecordCount || 0}}ï¼‰</text>
    </view>
    <view class="summary-item summary-hl {{showOnlyPayable ? 'summary-payable-active' : ''}}" hover-class="summary-item-hl-hover" hover-stay-time="100" bindtap="onTogglePayableFilter">
      <text class="summary-num">Â¥{{summary.totalWage || '0.00'}}</text>
      <text class="summary-label">å·¥èµ„æ±‡æ€»ï¼ˆ{{summary.payableRecordCount || 0}}æ¡ï¼‰</text>
    </view>
  </view>

  <!-- è¡¨æ ¼ -->
  <view class="table-wrap" wx:if="{{displayRecords.length > 0}}">
    <scan-record-table records="{{displayRecords}}" showAmount="{{true}}" />
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{displayRecords.length === 0 && !loading}}" class="empty-state">
    <text class="empty-icon">ğŸ“…</text>
    <text class="empty-text">{{showOnlyPayable ? 'æš‚æ— è®¡è–ªè®°å½•' : (displayMonth + ' æš‚æ— è®°å½•')}}</text>
    <text class="empty-hint">{{showOnlyPayable ? 'ç‚¹å‡»å·¥èµ„æ±‡æ€»å¯åˆ‡å›å…¨éƒ¨è®°å½•' : 'æœ¬æœˆå°šæœªæ‰«ç '}}</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-row">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view wx:if="{{!loading && hasMore && displayRecords.length > 0}}" class="load-more" hover-class="load-more-hover" hover-stay-time="100" bindtap="onLoadMore">
    <text>åŠ è½½æ›´å¤š</text>
  </view>
  <view wx:if="{{!loading && !hasMore && displayRecords.length > 0}}" class="load-more no-more-row">
    <text class="no-more-text">â€” å·²åŠ è½½å…¨éƒ¨ â€”</text>
  </view>
</view>
