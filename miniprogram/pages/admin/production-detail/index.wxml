<view class="container">
  <!-- å¤´éƒ¨ç­›é€‰åŒºåŸŸ -->
  <view class="filter-section">
    <!-- æ—¥æœŸé€‰æ‹©è¡Œ -->
    <view class="date-row">
      <picker mode="date" value="{{startDate}}" bindchange="onStartDateChange">
        <view class="date-picker">
          <text class="date-label">å¼€å§‹</text>
          <text class="date-value">{{startDate}}</text>
        </view>
      </picker>
      <text class="date-separator">â€”</text>
      <picker mode="date" value="{{endDate}}" bindchange="onEndDateChange">
        <view class="date-picker">
          <view class="date-label">ç»“æŸ</view>
          <view class="date-value">{{endDate}}</view>
        </view>
      </picker>
    </view>

    <!-- æœç´¢è¡Œ -->
    <view class="search-row">
      <view class="search-box search-box-full">
        <text class="search-icon">ğŸ”</text>
        <input class="search-input" placeholder="è®¢å•å· / æ¬¾å·" value="{{searchKeyword}}" bindinput="onKeywordInput" confirm-type="search" bindconfirm="onSearch" />
      </view>
      <view class="search-btn" bindtap="onSearch">æœç´¢</view>
      <view class="clear-btn" bindtap="onClearSearch" wx:if="{{searchKeyword}}">é‡ç½®</view>
    </view>
  </view>

  <!-- Tab åˆ‡æ¢ -->
  <view class="tab-row">
    <view wx:for="{{tabs}}" wx:key="key" class="tab-item {{activeTab === index ? 'tab-active' : ''}}" data-index="{{index}}" bindtap="onTabChange">
      <text>{{item.label}}</text>
    </view>
  </view>

  <!-- è¡¨æ ¼ï¼ˆè¡¨å¤´+æ•°æ®ä¸€ä½“æ¨ªå‘æ»šåŠ¨ï¼‰ -->
  <scroll-view scroll-x class="table-wrap" wx:if="{{records.length > 0}}">
    <view class="table-inner">
      <!-- è¡¨å¤´ -->
      <view class="table-header">
        <text class="th th-worker">å‘˜å·¥</text>
        <text class="th th-order">è®¢å•å·</text>
        <text class="th th-bundle">è²å·</text>
        <text class="th th-process">ç¯èŠ‚</text>
        <text class="th th-price">å•ä»·</text>
        <text class="th th-color">é¢œè‰²</text>
        <text class="th th-qty">æ•°é‡</text>
        <text class="th th-size">ç æ•°</text>
        <text class="th th-time">æ—¶é—´</text>
      </view>
      <!-- æ•°æ®è¡Œ -->
      <view wx:for="{{records}}" wx:key="id" class="table-row">
        <text class="td td-worker">{{item.displayWorker}}</text>
        <text class="td td-order">{{item.displayOrderNo}}</text>
        <text class="td td-bundle">{{item.displayBundleNo}}</text>
        <text class="td td-process">{{item.displayProcess}}</text>
        <text class="td td-price">{{item.displayUnitPrice}}</text>
        <text class="td td-color">{{item.displayColor}}</text>
        <text class="td td-qty">{{item.displayQuantity}}</text>
        <text class="td td-size">{{item.displaySize}}</text>
        <text class="td td-time">{{item.displayTime}}</text>
      </view>
    </view>
  </scroll-view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{records.length === 0 && !loading}}" class="empty-state">
    <text class="empty-icon">ğŸ“‹</text>
    <text class="empty-text">æš‚æ— {{tabs[activeTab].label}}è®°å½•</text>
    <text class="empty-hint" wx:if="{{activeTab === 0}}">ä»Šæ—¥å°šæœªæ‰«ç ï¼Œæ‰«ç åè®°å½•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ</text>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-row">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view wx:if="{{!loading && hasMore && records.length > 0}}" class="load-more" bindtap="onLoadMore">
    <text>åŠ è½½æ›´å¤š</text>
  </view>
</view>
