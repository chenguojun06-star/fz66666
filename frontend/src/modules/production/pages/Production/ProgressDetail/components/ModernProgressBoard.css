.mpb-wrap{width:100%}
.mpb-glass{width:100%;padding:8px 10px;border-radius:12px;background:var(--color-bg-base);border:1px solid var(--color-border);box-shadow:none}
.mpb-row{display:grid;grid-template-columns:1fr auto;align-items:center;gap:10px;min-height:46px}
.mpb-pill{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:var(--radius-sm);background:var(--color-bg-base);border:1px solid var(--color-border);color:var(--color-text-primary);max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.mpb-pillDot{width:8px;height:8px;border-radius:999px;flex:0 0 auto;box-shadow:0 8px 18px rgba(15,23,42,.12)}
.mpb-nodesWrap{display:flex;align-items:center;gap:8px;min-height:46px;min-width:120px;flex-wrap:nowrap;overflow-x:auto;overscroll-behavior-x:contain;padding-bottom:2px}
.mpb-nodesWrap::-webkit-scrollbar{height:4px}
.mpb-nodesWrap::-webkit-scrollbar-thumb{background:rgba(15,23,42,.15);border-radius:999px}
.mpb-nodesWrap::-webkit-scrollbar-track{background:transparent}
.mpb-mark{display:flex;align-items:center}
.mpb-node{position:relative;overflow:hidden;width:70px;height:70px;padding:0;border-radius:50%;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;background:var(--color-bg-base);border:1px solid var(--color-border);color:var(--color-text-primary);box-shadow:none}
.mpb-node::before{content:"";position:absolute;left:0;top:auto;bottom:0;right:0;width:100%;height:var(--p,0%);background:var(--color-primary-light);transition:height .35s ease;opacity:.18;border-radius:50%}
.mpb-nodeName{position:relative;z-index:1;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:50px;font-size:11px;line-height:14px;text-align:center}
.mpb-nodeQty{position:relative;z-index:1;flex:0 0 auto;display:inline-flex;align-items:center;justify-content:center;height:16px;min-width:20px;padding:0 4px;border-radius:999px;background:var(--color-bg-base);border:1px solid var(--color-border);color:var(--color-text-primary);font-weight:700;font-size:10px;line-height:16px;font-variant-numeric:tabular-nums}
.mpb-node.mpb-nodeDone{border-color:var(--color-success);color:var(--color-text-primary)}
.mpb-node.mpb-nodeCurrent{border-color:var(--color-primary);color:var(--color-text-primary)}
.mpb-pop{animation:none}
.mpb-right{display:flex;flex-direction:column;align-items:flex-end;gap:2px;min-width:92px}
.mpb-percent{display:inline-flex;align-items:center;justify-content:center;height:22px;min-width:52px;padding:0 10px;border-radius:var(--radius-sm);background:var(--color-bg-base);border:1px solid var(--color-border);color:var(--color-text-primary);font-weight:700;font-size:12px;font-variant-numeric:tabular-nums}
.mpb-stats{color:var(--color-text-secondary);font-size:12px;line-height:14px;white-space:nowrap;font-variant-numeric:tabular-nums}
.mpb-nodeHeaderActions{display:flex;align-items:center;gap:8px;flex-wrap:nowrap;max-width:100%;overflow-x:auto;overscroll-behavior-x:contain;padding-bottom:2px}
.mpb-nodeHeaderActions .ant-select-selector{border-radius:999px}
.mpb-nodeHeaderActions::-webkit-scrollbar{height:6px}
.mpb-nodeHeaderActions::-webkit-scrollbar-thumb{background:rgba(15,23,42,.18);border-radius:999px}
.mpb-nodeHeaderRow{display:flex;align-items:center;justify-content:space-between;gap:10px;max-width:100%;overflow-x:auto;overscroll-behavior-x:contain}
.mpb-nodeHeaderRow::-webkit-scrollbar{height:6px}
.mpb-nodeHeaderRow::-webkit-scrollbar-thumb{background:rgba(15,23,42,.18);border-radius:999px}
.mpb-nodeHeaderTitle{flex:0 0 auto;white-space:nowrap;font-weight:600}
.mpb-nodeHeaderRow .mpb-nodeCreateName{flex:0 0 240px;min-width:200px}
.mpb-nodeHeaderRow .mpb-nodeCreatePrice{flex:0 0 110px}
.mpb-nodeHeaderRow .mpb-nodeCreateBtn{flex:0 0 auto}
.mpb-nodeCreateRow{display:flex;align-items:center;gap:8px;flex-wrap:nowrap;max-width:100%;overflow-x:auto;overscroll-behavior-x:contain;padding-bottom:2px}
.mpb-nodeCreateRow::-webkit-scrollbar{height:6px}
.mpb-nodeCreateRow::-webkit-scrollbar-thumb{background:rgba(15,23,42,.18);border-radius:999px}
.mpb-nodeCreateRow .ant-input,.mpb-nodeCreateRow .ant-input-number{border-radius:999px}
.mpb-nodeCreateRow .ant-input{height:32px}
.mpb-nodeCreateRow .ant-input-number{height:32px;display:flex;align-items:center}
.mpb-nodeCreateRow .ant-input-number-input{height:30px}
.mpb-nodeCreateRow .mpb-nodeCreatePrice{flex:0 0 120px}
.mpb-nodeCreateRow .mpb-nodeCreateBtn{flex:0 0 auto}
.mpb-nodeCreateRow .mpb-nodeCreateName{flex:1 1 0;min-width:0}

.mpb-detailTrack{position:relative;height:28px;border-radius:var(--radius-sm);background:var(--color-bg-base);border:1px solid var(--color-border);overflow:hidden;box-shadow:none}
.mpb-detailFill{position:absolute;left:0;top:0;bottom:0;width:var(--p,0%);border-radius:var(--radius-sm);background:var(--color-primary-light);transition:width .35s ease;opacity:.18}
.mpb-detailBarText{position:absolute;left:0;right:0;top:0;bottom:0;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:0 10px;color:var(--color-text-primary);font-weight:600;font-size:12px;line-height:28px;pointer-events:none;text-shadow:none}
.mpb-detailBarLeft{min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.mpb-detailBarRight{flex:0 0 auto;white-space:nowrap;font-variant-numeric:tabular-nums}
.mpb-detailCards{display:flex;gap:4px;min-width:max-content;align-items:stretch}
.mpb-detailCard{position:relative;overflow:hidden;border-radius:var(--radius-sm);background:var(--color-bg-base);border:1px solid var(--color-border);box-shadow:none;padding:4px;display:flex;flex-direction:column;gap:6px}
.mpb-detailCard.mpb-draggable .mpb-detailTrack{cursor:grab}
.mpb-detailCard.mpb-draggable .mpb-detailTrack:active{cursor:grabbing}
.mpb-detailCard.mpb-dragging{opacity:.55;transform:scale(.98)}
.mpb-detailCard.mpb-dragOver{outline:2px dashed rgba(59,130,246,.55);outline-offset:2px}
.mpb-detailCard .ant-input-number{border-radius:999px}
.mpb-detailCard .ant-input-number{height:28px;display:flex;align-items:center}
.mpb-detailCard .ant-input-number-input{height:26px}
.mpb-detailCard::before{content:"";position:absolute;left:0;top:0;right:0;height:8px;background:var(--color-bg-base);opacity:.0;pointer-events:none}
.mpb-detailBottomRow{position:relative;z-index:1;display:flex;align-items:center;justify-content:space-between;gap:6px;margin-top:auto}
.mpb-detailPriceInline{display:flex;align-items:center;gap:6px;min-width:0;flex:1 1 auto}
.mpb-detailLabel{color:rgba(15,23,42,.78);font-size:13px;line-height:16px;white-space:nowrap}
.mpb-detailPriceInput{width:100px;max-width:100%}
.mpb-detailPriceInput .ant-input-number-input{font-size:13px}
.mpb-detailActions{display:flex;gap:6px;justify-content:flex-end;flex:0 0 auto}
.mpb-detailCard.mpb-detailDone{opacity:.74;background:rgba(248,250,252,.42)}
.mpb-detailCard.mpb-detailDone::before{opacity:.0}
.mpb-detailCard.mpb-detailDone .mpb-detailFill{animation:none}
.mpb-detailCard.mpb-detailCurrent{border-color:rgba(96,165,250,.42);box-shadow:0 12px 22px rgba(59,130,246,.14),0 10px 18px rgba(15,23,42,.08)}
.mpb-detailCard.mpb-detailFrozen{background:rgba(241,245,249,.38);border-color:rgba(148,163,184,.28);box-shadow:0 8px 18px rgba(15,23,42,.06)}
.mpb-detailCard.mpb-detailFrozen .mpb-detailFill{animation:none;filter:none;opacity:.6}
.mpb-glass.mpb-frozen{background:var(--color-bg-base);border-color:var(--color-border);box-shadow:none}
.mpb-frozen .mpb-pill,.mpb-frozen .mpb-percent{background:var(--color-bg-base);border-color:var(--color-border);color:var(--color-text-secondary)}
.mpb-frozen .mpb-stats{color:var(--color-text-secondary)}
.mpb-frozen .mpb-pillDot{box-shadow:none}
.mpb-frozen .mpb-node{background:var(--color-bg-base);border-color:var(--color-border);color:var(--color-text-secondary);box-shadow:none}
.mpb-frozen .mpb-node::before{background:var(--color-text-secondary);opacity:.12}
.mpb-frozen .mpb-nodeQty{background:var(--color-bg-base);border-color:var(--color-border);color:var(--color-text-secondary)}
.mpb-frozen .mpb-node.mpb-nodeDone{background:var(--color-bg-base);border-color:var(--color-border);color:var(--color-text-secondary)}
.mpb-frozen .mpb-node.mpb-nodeCurrent{animation:none}
@media (prefers-reduced-motion: reduce){.mpb-pop{animation:none}.mpb-node.mpb-nodeCurrent{animation:none}.mpb-node::before{animation:none}}

/* ========== 深色主题 ========== */
:root[data-theme="dark"] .mpb-glass{background:rgba(30,33,40,.85);border-color:rgba(255,255,255,.12);box-shadow:0 8px 22px rgba(0,0,0,.35)}
:root[data-theme="dark"] .mpb-pill{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15);color:rgba(232,234,237,.88)}
:root[data-theme="dark"] .mpb-pillDot{box-shadow:0 8px 18px rgba(0,0,0,.25)}
:root[data-theme="dark"] .mpb-node{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15);color:rgba(232,234,237,.85);box-shadow:0 10px 18px rgba(0,0,0,.25)}
:root[data-theme="dark"] .mpb-nodeName{color:rgba(232,234,237,.92)}
:root[data-theme="dark"] .mpb-nodeQty{background:rgba(255,255,255,.10);border-color:rgba(255,255,255,.18);color:rgba(232,234,237,.88)}
:root[data-theme="dark"] .mpb-node.mpb-nodeDone{border-color:rgba(95,208,104,.45);color:rgba(232,234,237,.92)}
:root[data-theme="dark"] .mpb-node.mpb-nodeCurrent{border-color:rgba(90,156,255,.5);color:rgba(232,234,237,.95)}
:root[data-theme="dark"] .mpb-percent{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15);color:rgba(232,234,237,.88)}
:root[data-theme="dark"] .mpb-stats{color:rgba(232,234,237,.6)}
:root[data-theme="dark"] .mpb-detailTrack{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.12)}
:root[data-theme="dark"] .mpb-detailBarText{color:rgba(232,234,237,.92);text-shadow:none}
:root[data-theme="dark"] .mpb-detailCard{background:rgba(30,33,40,.85);border-color:rgba(255,255,255,.12);box-shadow:0 10px 18px rgba(0,0,0,.3)}
:root[data-theme="dark"] .mpb-detailCard::before{background:rgba(255,255,255,.03)}
:root[data-theme="dark"] .mpb-detailLabel{color:rgba(232,234,237,.75)}
:root[data-theme="dark"] .mpb-detailCard.mpb-detailDone{background:rgba(30,33,40,.55)}
:root[data-theme="dark"] .mpb-detailCard.mpb-detailCurrent{border-color:rgba(90,156,255,.45);box-shadow:0 12px 22px rgba(90,156,255,.18),0 10px 18px rgba(0,0,0,.25)}
:root[data-theme="dark"] .mpb-detailCard.mpb-detailFrozen{background:rgba(30,33,40,.45);border-color:rgba(255,255,255,.1)}
:root[data-theme="dark"] .mpb-glass.mpb-frozen{background:rgba(30,33,40,.65);border-color:rgba(255,255,255,.08)}
:root[data-theme="dark"] .mpb-frozen .mpb-pill,:root[data-theme="dark"] .mpb-frozen .mpb-percent{background:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(232,234,237,.5)}
:root[data-theme="dark"] .mpb-frozen .mpb-stats{color:rgba(232,234,237,.35)}
:root[data-theme="dark"] .mpb-frozen .mpb-node{background:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(232,234,237,.45)}
:root[data-theme="dark"] .mpb-frozen .mpb-nodeQty{background:rgba(255,255,255,.05);border-color:rgba(255,255,255,.1);color:rgba(232,234,237,.4)}
:root[data-theme="dark"] .mpb-nodeHeaderActions::-webkit-scrollbar-thumb,:root[data-theme="dark"] .mpb-nodeHeaderRow::-webkit-scrollbar-thumb,:root[data-theme="dark"] .mpb-nodeCreateRow::-webkit-scrollbar-thumb{background:rgba(255,255,255,.18)}

/* ========== 蓝色主题 ========== */
:root[data-theme="blue"] .mpb-glass{background:rgba(255,255,255,.75);border-color:rgba(45,127,249,.18);box-shadow:0 8px 22px rgba(11,45,92,.10)}
:root[data-theme="blue"] .mpb-pill{background:rgba(45,127,249,.08);border-color:rgba(45,127,249,.18);color:#0b2d5c}
:root[data-theme="blue"] .mpb-pillDot{box-shadow:0 8px 18px rgba(11,45,92,.15)}
:root[data-theme="blue"] .mpb-node{background:rgba(45,127,249,.06);border-color:rgba(45,127,249,.18);color:#0b2d5c;box-shadow:0 10px 18px rgba(11,45,92,.08)}
:root[data-theme="blue"] .mpb-nodeName{color:#0b2d5c}
:root[data-theme="blue"] .mpb-nodeQty{background:rgba(45,127,249,.08);border-color:rgba(45,127,249,.2);color:#0b2d5c}
:root[data-theme="blue"] .mpb-node.mpb-nodeDone{border-color:rgba(34,197,94,.4);color:#0b2d5c}
:root[data-theme="blue"] .mpb-node.mpb-nodeCurrent{border-color:rgba(45,127,249,.5);color:#0b2d5c}
:root[data-theme="blue"] .mpb-percent{background:rgba(45,127,249,.08);border-color:rgba(45,127,249,.18);color:#0b2d5c}
:root[data-theme="blue"] .mpb-stats{color:rgba(11,45,92,.6)}
:root[data-theme="blue"] .mpb-detailTrack{background:rgba(45,127,249,.06);border-color:rgba(45,127,249,.18)}
:root[data-theme="blue"] .mpb-detailBarText{color:#0b2d5c;text-shadow:0 1px 0 rgba(255,255,255,.7)}
:root[data-theme="blue"] .mpb-detailCard{background:rgba(255,255,255,.75);border-color:rgba(45,127,249,.18);box-shadow:0 10px 18px rgba(11,45,92,.08)}
:root[data-theme="blue"] .mpb-detailCard::before{background:rgba(255,255,255,.2)}
:root[data-theme="blue"] .mpb-detailLabel{color:rgba(11,45,92,.75)}
:root[data-theme="blue"] .mpb-detailCard.mpb-detailDone{background:rgba(248,250,252,.65)}
:root[data-theme="blue"] .mpb-detailCard.mpb-detailCurrent{border-color:rgba(45,127,249,.4);box-shadow:0 12px 22px rgba(45,127,249,.14),0 10px 18px rgba(11,45,92,.08)}
:root[data-theme="blue"] .mpb-glass.mpb-frozen{background:rgba(248,250,252,.75);border-color:rgba(11,45,92,.12)}
:root[data-theme="blue"] .mpb-frozen .mpb-pill,:root[data-theme="blue"] .mpb-frozen .mpb-percent{background:rgba(11,45,92,.04);border-color:rgba(11,45,92,.12);color:rgba(11,45,92,.5)}
:root[data-theme="blue"] .mpb-frozen .mpb-stats{color:rgba(11,45,92,.4)}
:root[data-theme="blue"] .mpb-frozen .mpb-node{background:rgba(11,45,92,.04);border-color:rgba(11,45,92,.12);color:rgba(11,45,92,.5)}
:root[data-theme="blue"] .mpb-frozen .mpb-nodeQty{background:rgba(11,45,92,.04);border-color:rgba(11,45,92,.12);color:rgba(11,45,92,.45)}
:root[data-theme="blue"] .mpb-nodeHeaderActions::-webkit-scrollbar-thumb,:root[data-theme="blue"] .mpb-nodeHeaderRow::-webkit-scrollbar-thumb,:root[data-theme="blue"] .mpb-nodeCreateRow::-webkit-scrollbar-thumb{background:rgba(11,45,92,.18)}

/* ========== 白色主题 ========== */
:root[data-theme="white"] .mpb-glass{background:rgba(255,255,255,.85);border-color:rgba(31,31,31,.1);box-shadow:0 8px 22px rgba(31,31,31,.06)}
:root[data-theme="white"] .mpb-pill{background:rgba(31,31,31,.04);border-color:rgba(31,31,31,.12);color:#1f1f1f}
:root[data-theme="white"] .mpb-node{background:rgba(31,31,31,.04);border-color:rgba(31,31,31,.12);color:#1f1f1f;box-shadow:0 10px 18px rgba(31,31,31,.06)}
:root[data-theme="white"] .mpb-nodeName{color:#1f1f1f}
:root[data-theme="white"] .mpb-nodeQty{background:rgba(31,31,31,.06);border-color:rgba(31,31,31,.12);color:#1f1f1f}
:root[data-theme="white"] .mpb-node.mpb-nodeDone{border-color:rgba(34,197,94,.4);color:#1f1f1f}
:root[data-theme="white"] .mpb-node.mpb-nodeCurrent{border-color:rgba(45,127,249,.45);color:#1f1f1f}
:root[data-theme="white"] .mpb-percent{background:rgba(31,31,31,.04);border-color:rgba(31,31,31,.12);color:#1f1f1f}
:root[data-theme="white"] .mpb-stats{color:rgba(31,31,31,.55)}
:root[data-theme="white"] .mpb-detailTrack{background:rgba(31,31,31,.04);border-color:rgba(31,31,31,.12)}
:root[data-theme="white"] .mpb-detailBarText{color:#1f1f1f;text-shadow:0 1px 0 rgba(255,255,255,.7)}
:root[data-theme="white"] .mpb-detailCard{background:rgba(255,255,255,.85);border-color:rgba(31,31,31,.1);box-shadow:0 10px 18px rgba(31,31,31,.06)}
:root[data-theme="white"] .mpb-detailLabel{color:rgba(31,31,31,.7)}
